(()=>{"use strict";const e=document.querySelector("body"),t=document.querySelector(".header__checkbox"),o=document.querySelector(".header__checkbox-ball"),s=document.querySelector(".header__checkbox-label"),n=document.querySelector(".name"),r=document.querySelectorAll(".timer__numbers"),c=document.querySelectorAll(".timer__title"),l=document.getElementById("days"),i=document.getElementById("hours"),a=document.getElementById("minutes"),u=document.getElementById("seconds"),h=document.querySelector(".icon__instagram"),_=document.querySelector(".icon__facebook"),g=document.querySelector(".icon__linkedin"),d=(new Date).getHours(),m=(new Date).getMinutes();function f(e){return e>0&&e<10?`0${e}`:e}function p(){e.classList.toggle("body_theme_light"),s.classList.toggle("header__checkbox-label_checked"),o.classList.toggle("header__checkbox-ball_checked"),n.classList.toggle("name_theme_light"),r.forEach((e=>e.classList.toggle("timer__numbers_theme_light"))),c.forEach((e=>e.classList.toggle("timer__title_theme_light"))),h.classList.toggle("icon__instagram_theme_light"),_.classList.toggle("icon__facebook_theme_light"),g.classList.toggle("icon__linkedin_theme_light")}const y=new class{constructor(e){this._apiUrl=e.apiUrl}_getRes(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(`${this._apiUrl}/${e}`,t).then(this._getRes)}getUserLocation(){return this._request("ipgeo?apiKey=8ffa38ec677445779ee783968bee7e3e",{method:"GET"})}}({apiUrl:"https://api.ipgeolocation.io"}),b=new class{constructor(e){this._apiUrl=e.apiUrl,this._headers=e.headers}_getRes(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(`${this._apiUrl}/${e}`,t).then(this._getRes)}getSunriseSunsetData(e,t){return this._request(`json?lat=${e}&lng=${t}`,{method:"GET"})}}({apiUrl:"https://api.sunrise-sunset.org"});function k(e){const[t,o]=e.split(" ");let[s,n]=t.split(":");return"12"===s&&(s="00"),"PM"===o&&(s=parseInt(s,10)+12),`${f(s)}:${f(n)}`}!function(e){const t=setInterval(o,1e3);function o(){const e=function(e){const t=Date.parse(new Date)-Date.parse(e)-18e6;let o=0,s=0,n=0,r=0,c=0;return t>0&&(o=Math.floor(t/1e3/60/60/24),Math.floor(t/1e3/60/60/24/7),s=Math.floor(t/1e3/60/60%24),n=Math.floor(t/1e3/60%60),r=Math.floor(t/1e3%60)),{total:t,days:o,hours:s,minutes:n,seconds:r}}("2022-02-24");e.total<=0&&clearInterval(t),l.textContent=f(e.days),i.textContent=f(e.hours),a.textContent=f(e.minutes),u.textContent=f(e.seconds)}o()}(),y.getUserLocation().then((e=>b.getSunriseSunsetData(e.latitude,e.longitude).then((e=>{const t=k(e.results.sunrise),o=k(e.results.astronomical_twilight_end);!function(e,t,o,s){const n=`${f(e)}:${f(t)}`;n>=o&&n<=s&&p()}(d,m,t,o)})).catch((e=>console.log(e))))).catch((e=>console.log(e))),t.addEventListener("change",p),o.addEventListener("click",p)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUYsT0FFM0JELE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLEtHM0I5QmxGLEVBQVNxRixpQkFBaUIsU0FBVS9ELEdBQ3BDckIsRUFBYW9GLGlCQUFpQixRQUFTL0QsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhci10aW1lci8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93YXItdGltZXIvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL2Nsb2NrU2V0dGVyLmpzIiwid2VicGFjazovL3dhci10aW1lci8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvdGhlbWVTd2l0Y2hlci5qcyIsIndlYnBhY2s6Ly93YXItdGltZXIvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3VzZXJMb2NhdGlvblRoZW1lU2V0dGVyLmpzIiwid2VicGFjazovL3dhci10aW1lci8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpTG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2FyLXRpbWVyLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGlTdW5yaXNlU3Vuc2V0LmpzIiwid2VicGFjazovL3dhci10aW1lci8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQQUdFXG5leHBvcnQgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbi8vIEhFQURFUlxuZXhwb3J0IGNvbnN0IGNoZWNrQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fY2hlY2tib3gnKTtcbmV4cG9ydCBjb25zdCBjaGVja0JveEJhbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19jaGVja2JveC1iYWxsJyk7XG5leHBvcnQgY29uc3QgY2hlY2tCb3hMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2NoZWNrYm94LWxhYmVsJyk7XG4vLyBOQU1FICYgVElNRVJcbmV4cG9ydCBjb25zdCBjb250ZW50TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJyk7XG5leHBvcnQgY29uc3QgdGltZXJOdW1iZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVyX19udW1iZXJzJyk7XG5leHBvcnQgY29uc3QgdGltZXJUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZXJfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgZGF5cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXlzJyk7XG5leHBvcnQgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG91cnMnKTtcbmV4cG9ydCBjb25zdCBtaW51dGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbnV0ZXMnKTtcbmV4cG9ydCBjb25zdCBzZWNvbmRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY29uZHMnKTtcbi8vIEZPT1RFUlxuZXhwb3J0IGNvbnN0IGljb25JbnN0YWdyYW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaWNvbl9faW5zdGFncmFtJyk7XG5leHBvcnQgY29uc3QgaWNvbkZhY2Vib29rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljb25fX2ZhY2Vib29rJyk7XG5leHBvcnQgY29uc3QgaWNvbkxpbmtlZGluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljb25fX2xpbmtlZGluJyk7XG4vLyBEQVRFICYgVElNRVxuZXhwb3J0IGNvbnN0IGRlYXRoRGF0ZSA9ICcyMDIyLTAyLTI0JztcbmV4cG9ydCBjb25zdCBjdXJyZW50SG91cnMgPSBuZXcgRGF0ZSgpLmdldEhvdXJzKCk7XG5leHBvcnQgY29uc3QgY3VycmVudE1pbnV0ZXMgPSBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKTtcblxuLy8gZXhwb3J0IGNvbnN0IGN1cnJlbnRUaW1lID0gYCR7bmV3IERhdGUoKS5nZXRIb3VycygpfToke25ldyBEYXRlKCkuZ2V0TWludXRlcygpfWAiLCJpbXBvcnQge2RheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCJcblxuLy8gUEFTU0VEIFRJTUUgR0VUVEVSXG5mdW5jdGlvbiBnZXRUaW1lUGFzc2VkKGVuZHRpbWUpIHtcbiAgY29uc3QgdCA9IERhdGUucGFyc2UobmV3IERhdGUoKSkgLSBEYXRlLnBhcnNlKGVuZHRpbWUpIC0gMTgwMDAwMDA7XG4gIGxldCBkYXlzID0gMCxcbiAgICBob3VycyA9IDAsXG4gICAgbWludXRlcyA9IDAsXG4gICAgc2Vjb25kcyA9IDAsXG4gICAgd2Vla3MgPSAwO1xuICBpZiAodCA+IDApIHtcbiAgICBkYXlzID0gTWF0aC5mbG9vcih0IC8gMTAwMCAvIDYwIC8gNjAgLyAyNCk7XG4gICAgd2Vla3MgPSBNYXRoLmZsb29yKHQgLyAxMDAwIC8gNjAgLyA2MCAvIDI0IC8gNyk7XG4gICAgaG91cnMgPSBNYXRoLmZsb29yKHQgLyAxMDAwIC8gNjAgLyA2MCAlIDI0KTtcbiAgICBtaW51dGVzID0gTWF0aC5mbG9vcih0IC8gMTAwMCAvIDYwICUgNjApO1xuICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKHQgLyAxMDAwICUgNjApO1xuICB9XG4gIHJldHVybiB7XG4gICAgJ3RvdGFsJyA6IHQsXG4gICAgJ2RheXMnIDogZGF5cyxcbiAgICAnaG91cnMnIDogaG91cnMsXG4gICAgJ21pbnV0ZXMnIDogbWludXRlcyxcbiAgICAnc2Vjb25kcycgOiBzZWNvbmRzXG4gIH07XG59XG4vLyBaRVJPIFNFVFRFUlxuZXhwb3J0IGZ1bmN0aW9uIHNldFplcm8obnVtKSB7XG4gIGlmIChudW0gPiAwICYmIG51bSA8IDEwKSB7XG4gICAgICByZXR1cm4gYDAke251bX1gO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudW07XG4gICAgfSBcbn1cbi8vIFRJTUUgU0VUVEVSXG5leHBvcnQgZnVuY3Rpb24gc2V0Q2xvY2soZW5kdGltZSl7XG4gIGNvbnN0IHRpbWVJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZUNsb2NrLCAxMDAwKTtcbiAgZnVuY3Rpb24gdXBkYXRlQ2xvY2soKXtcbiAgICBjb25zdCB0ID0gZ2V0VGltZVBhc3NlZChlbmR0aW1lKTtcbiAgICBpZiAodC50b3RhbCA8PSAwKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZUludGVydmFsKTtcbiAgICB9XG4gICAgZGF5cy50ZXh0Q29udGVudCA9IHNldFplcm8odC5kYXlzKTtcbiAgICBob3Vycy50ZXh0Q29udGVudCA9IHNldFplcm8odC5ob3Vycyk7XG4gICAgbWludXRlcy50ZXh0Q29udGVudCA9IHNldFplcm8odC5taW51dGVzKTtcbiAgICBzZWNvbmRzLnRleHRDb250ZW50ID0gc2V0WmVybyh0LnNlY29uZHMpO1xuICB9IFxuICB1cGRhdGVDbG9jaygpOyAgICAgIFxufSIsImltcG9ydCB7XG4gIGJvZHksXG4gIGNoZWNrQm94TGFiZWwsXG4gIGNoZWNrQm94QmFsbCxcbiAgY29udGVudE5hbWUsXG4gIHRpbWVyTnVtYmVycyxcbiAgdGltZXJUaXRsZXMsXG4gIGljb25JbnN0YWdyYW0sXG4gIGljb25GYWNlYm9vayxcbiAgaWNvbkxpbmtlZGluXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IHNldFplcm8gfSBmcm9tIFwiLi9jbG9ja1NldHRlci5qc1wiO1xuXG4vLyBUSEVNRSBTV0lUQ0hFUlxuZXhwb3J0IGZ1bmN0aW9uIHN3aXRjaFRoZW1lICgpIHtcbiAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKCdib2R5X3RoZW1lX2xpZ2h0Jyk7XG4gIGNoZWNrQm94TGFiZWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19jaGVja2JveC1sYWJlbF9jaGVja2VkJyk7XG4gIGNoZWNrQm94QmFsbC5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2NoZWNrYm94LWJhbGxfY2hlY2tlZCcpOyAgICBcbiAgY29udGVudE5hbWUuY2xhc3NMaXN0LnRvZ2dsZSgnbmFtZV90aGVtZV9saWdodCcpO1xuICB0aW1lck51bWJlcnMuZm9yRWFjaChudW1iZXIgPT4gbnVtYmVyLmNsYXNzTGlzdC50b2dnbGUoJ3RpbWVyX19udW1iZXJzX3RoZW1lX2xpZ2h0JykpO1xuICB0aW1lclRpdGxlcy5mb3JFYWNoKHRpdGxlID0+IHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoJ3RpbWVyX190aXRsZV90aGVtZV9saWdodCcpKTtcbiAgaWNvbkluc3RhZ3JhbS5jbGFzc0xpc3QudG9nZ2xlKCdpY29uX19pbnN0YWdyYW1fdGhlbWVfbGlnaHQnKTtcbiAgaWNvbkZhY2Vib29rLmNsYXNzTGlzdC50b2dnbGUoJ2ljb25fX2ZhY2Vib29rX3RoZW1lX2xpZ2h0Jyk7XG4gIGljb25MaW5rZWRpbi5jbGFzc0xpc3QudG9nZ2xlKCdpY29uX19saW5rZWRpbl90aGVtZV9saWdodCcpO1xufVxuLy8gVEhFTUUgU0VUVEVSXG5leHBvcnQgZnVuY3Rpb24gc2V0VGhlbWUgKGN1cnJlbnRIb3VycywgY3VycmVudE1pbnV0ZXMsIHN1bnJpc2VUaW1lLCBzdW5zZXRUaW1lKSB7XG4gIGNvbnN0IGN1cnJlbnRUaW1lID0gYCR7c2V0WmVybyhjdXJyZW50SG91cnMpfToke3NldFplcm8oY3VycmVudE1pbnV0ZXMpfWBcbiAgaWYgKGN1cnJlbnRUaW1lID49IHN1bnJpc2VUaW1lICYmIGN1cnJlbnRUaW1lIDw9IHN1bnNldFRpbWUgKSB7XG4gICAgc3dpdGNoVGhlbWUoKTtcbiAgfVxufSIsImltcG9ydCB7IGN1cnJlbnRIb3VycywgY3VycmVudE1pbnV0ZXMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCJcbmltcG9ydCBBcGlMb2NhdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlMb2NhdGlvbi5qc1wiXG5pbXBvcnQgQXBpU3VucmlzZVN1bnNldCBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlTdW5yaXNlU3Vuc2V0XCJcbmltcG9ydCB7IHNldFRoZW1lIH0gZnJvbSBcIi4vdGhlbWVTd2l0Y2hlci5qc1wiXG5pbXBvcnQgeyBzZXRaZXJvIH0gZnJvbSBcIi4vY2xvY2tTZXR0ZXIuanNcIlxuXG4vLyAvLyBBUElcbmNvbnN0IGFwaUxvY2F0aW9uID0gbmV3IEFwaUxvY2F0aW9uICh7XG4gIGFwaVVybDogJ2h0dHBzOi8vYXBpLmlwZ2VvbG9jYXRpb24uaW8nXG59KVxuY29uc3QgYXBpU3VucmlzZVN1bnNldCA9IG5ldyBBcGlTdW5yaXNlU3Vuc2V0ICh7XG4gIGFwaVVybDogJ2h0dHBzOi8vYXBpLnN1bnJpc2Utc3Vuc2V0Lm9yZydcbn0pXG5cbi8vIDEySCBUTyAyNEggQ09OVkVSVEVSXG5mdW5jdGlvbiBjb252ZXJ0VGltZSAodGltZVN0cikge1xuICBjb25zdCBbdGltZSwgbW9kaWZpZXJdID0gdGltZVN0ci5zcGxpdCgnICcpO1xuICBsZXQgW2hvdXJzLCBtaW51dGVzXSA9IHRpbWUuc3BsaXQoJzonKTtcbiAgaWYgKGhvdXJzID09PSAnMTInKSB7XG4gICAgaG91cnMgPSAnMDAnO1xuICB9XG4gIGlmIChtb2RpZmllciA9PT0gJ1BNJykge1xuICAgIGhvdXJzID0gcGFyc2VJbnQoaG91cnMsIDEwKSArIDEyO1xuICB9XG5cbiAgcmV0dXJuIGAke3NldFplcm8oaG91cnMpfToke3NldFplcm8obWludXRlcyl9YFxufVxuLy8gQVVUTyBTVU5TRVQgJiBTVU5SSVNFIFRIRU1FIFNFVFRFUlxuZXhwb3J0IGZ1bmN0aW9uIHNldFVzZXJMb2NhdGlvblRoZW1lKCkge1xuICByZXR1cm4gYXBpTG9jYXRpb24uZ2V0VXNlckxvY2F0aW9uKClcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgcmV0dXJuIGFwaVN1bnJpc2VTdW5zZXQuZ2V0U3VucmlzZVN1bnNldERhdGEocmVzLmxhdGl0dWRlLCByZXMubG9uZ2l0dWRlKVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgY29uc3Qgc3VucmlzZVRpbWUgPSBjb252ZXJ0VGltZShyZXMucmVzdWx0cy5zdW5yaXNlKVxuICAgICAgICBjb25zdCBzdW5zZXRUaW1lID0gY29udmVydFRpbWUocmVzLnJlc3VsdHMuYXN0cm9ub21pY2FsX3R3aWxpZ2h0X2VuZClcbiAgICAgICAgc2V0VGhlbWUoY3VycmVudEhvdXJzLCBjdXJyZW50TWludXRlcywgc3VucmlzZVRpbWUsIHN1bnNldFRpbWUpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaUxvY2F0aW9uIHtcbiAgY29uc3RydWN0b3IoZGF0YSl7XG4gICAgdGhpcy5fYXBpVXJsID0gZGF0YS5hcGlVcmw7XG4gICAgLy8gdGhpcy5faGVhZGVycyA9IGRhdGEuaGVhZGVyc1xuICB9XG4gIC8vINGE0YPQvdC60YbQuNGPINC/0L7Qu9GD0YfQtdC90LjRjyDQvtGC0LLQtdGC0LAg0Lgg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjRjyDQtdCz0L4g0LIg0L7QsdGK0LXQutGCXG4gIF9nZXRSZXMocmVzKSB7XG4gICAgcmV0dXJuIChyZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXG4gIH1cbiAgLy8g0YTRg9C90LrRhtC40Y8g0L7RgtC/0YDQsNCy0LrQuCBmZXRjaCDQt9Cw0L/RgNC+0YHQsFxuICBfcmVxdWVzdCAodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2FwaVVybH0vJHt1cmx9YCwgb3B0aW9ucykudGhlbih0aGlzLl9nZXRSZXMpXG4gIH1cbiAgLy8g0YTRg9C90LrRhtC40Y8g0L/QvtC70YPRh9C10L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICBnZXRVc2VyTG9jYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGlwZ2VvP2FwaUtleT04ZmZhMzhlYzY3NzQ0NTc3OWVlNzgzOTY4YmVlN2UzZWAsIHttZXRob2Q6ICdHRVQnfSlcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaVN1bnJpc2VTdW5zZXQge1xuICBjb25zdHJ1Y3RvcihkYXRhKXtcbiAgICB0aGlzLl9hcGlVcmwgPSBkYXRhLmFwaVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gZGF0YS5oZWFkZXJzXG4gIH1cbiAgLy8g0YTRg9C90LrRhtC40Y8g0L/QvtC70YPRh9C10L3QuNGPINC+0YLQstC10YLQsCDQuCDQv9GA0LXQvtCx0YDQsNC30L7QstCw0L3QuNGPINC10LPQviDQsiDQvtCx0YrQtdC60YJcbiAgX2dldFJlcyhyZXMpIHtcbiAgICByZXR1cm4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcbiAgfVxuICAvLyDRhNGD0L3QutGG0LjRjyDQvtGC0L/RgNCw0LLQutC4IGZldGNoINC30LDQv9GA0L7RgdCwXG4gIF9yZXF1ZXN0ICh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYXBpVXJsfS8ke3VybH1gLCBvcHRpb25zKS50aGVuKHRoaXMuX2dldFJlcylcbiAgfVxuICAvLyDRhNGD0L3QutGG0LjRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LjQvdGE0L7RgNC80LDRhtC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gIGdldFN1bnJpc2VTdW5zZXREYXRhKGxhdGl0dWRlLCBsb25naXR1ZGUpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChganNvbj9sYXQ9JHtsYXRpdHVkZX0mbG5nPSR7bG9uZ2l0dWRlfWAsIHttZXRob2Q6ICdHRVQnfSlcbiAgfVxufSIsIi8vIElNUE9SVFNcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiXG5pbXBvcnQgeyBzd2l0Y2hUaGVtZSB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvdGhlbWVTd2l0Y2hlci5qc1wiXG5pbXBvcnQgeyBzZXRVc2VyTG9jYXRpb25UaGVtZSB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvdXNlckxvY2F0aW9uVGhlbWVTZXR0ZXIuanNcIlxuaW1wb3J0IHsgc2V0Q2xvY2sgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL2Nsb2NrU2V0dGVyLmpzXCJcbmltcG9ydCB7IGRlYXRoRGF0ZSwgY2hlY2tCb3gsIGNoZWNrQm94QmFsbCB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiXG5cbi8vIEZVTkNUSU9OU1xuc2V0Q2xvY2soZGVhdGhEYXRlKTtcbnNldFVzZXJMb2NhdGlvblRoZW1lKClcblxuLy8gLy8gRVZFTlQgTElTVEVORVJTXG5jaGVja0JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBzd2l0Y2hUaGVtZSk7XG5jaGVja0JveEJhbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzd2l0Y2hUaGVtZSk7Il0sIm5hbWVzIjpbImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjaGVja0JveCIsImNoZWNrQm94QmFsbCIsImNoZWNrQm94TGFiZWwiLCJjb250ZW50TmFtZSIsInRpbWVyTnVtYmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0aW1lclRpdGxlcyIsImRheXMiLCJnZXRFbGVtZW50QnlJZCIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJpY29uSW5zdGFncmFtIiwiaWNvbkZhY2Vib29rIiwiaWNvbkxpbmtlZGluIiwiY3VycmVudEhvdXJzIiwiRGF0ZSIsImdldEhvdXJzIiwiY3VycmVudE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwic2V0WmVybyIsIm51bSIsInN3aXRjaFRoZW1lIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZm9yRWFjaCIsIm51bWJlciIsInRpdGxlIiwiYXBpTG9jYXRpb24iLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0aGlzIiwiX2FwaVVybCIsImFwaVVybCIsIl9nZXRSZXMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0VXNlckxvY2F0aW9uIiwibWV0aG9kIiwiYXBpU3VucmlzZVN1bnNldCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImdldFN1bnJpc2VTdW5zZXREYXRhIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJjb252ZXJ0VGltZSIsInRpbWVTdHIiLCJ0aW1lIiwibW9kaWZpZXIiLCJzcGxpdCIsInBhcnNlSW50IiwiZW5kdGltZSIsInRpbWVJbnRlcnZhbCIsInNldEludGVydmFsIiwidXBkYXRlQ2xvY2siLCJ0IiwicGFyc2UiLCJ3ZWVrcyIsIk1hdGgiLCJmbG9vciIsImdldFRpbWVQYXNzZWQiLCJ0b3RhbCIsImNsZWFySW50ZXJ2YWwiLCJ0ZXh0Q29udGVudCIsInNldENsb2NrIiwic3VucmlzZVRpbWUiLCJyZXN1bHRzIiwic3VucmlzZSIsInN1bnNldFRpbWUiLCJhc3Ryb25vbWljYWxfdHdpbGlnaHRfZW5kIiwiY3VycmVudFRpbWUiLCJzZXRUaGVtZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZEV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9